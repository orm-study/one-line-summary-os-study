## 운영체제 들어가기
### 운영체제 개요

- 개인용 컴퓨터: Windows, MacOS
- 대형 컴퓨터나 서버: 유닉스, 리눅스
- 스마트폰 태블릿: 안드로이드, ios
- 내비게이션,스마트워치, 냉장고, 세탁기: 임베디드 운영체제


> 💡 컴퓨터는 운영체제가 있어야 동작하는가?
> - 동작은 할 수 있지만 운영체제 없으면 처음 설계한 대로만 동작할 뿐 다른 기능 추가 불가
> - ex) 유선 전화는 전화 기능이 있지만 스마트폰은 다양한 기능 활용 가능


### 운영체제가 하는 일

1. 프로세스 관리
- 노래들으면서 게임해도 동작 가능.
- 게임을 하고 있으면 키보드와 마우스는 게임에만 반응하고 다른 프로그램은 백그라운드에서 동작해야한다. 만약 그렇지 않으면 다른 프로세스가 cpu를 독차지 해서 정상적으로 동작하지 않을 수있음
2. 메모리 관리
- 여러 프로그램을 동시에 실행하기 때문에 동시에 관리
3. 하드웨어 관리
- 사용자의 하드웨어의 직접적인 접근 막음(사용자가 악의적으로 공격을 할 수 있기 때문)
4. 파일 시스템 관리

### 운영체제의 역사

>💡 컴퓨터 시스템 개발자들의 고민
> - 어떻게 CPU 사용성을 향상시킬까?
> - 어떻게 오퍼레이터와 프로그래머 사이에서 낭비되는 시간 줄일 수 있을까?


- 1940: 에니악
    - 입출력 속도가 매우 느리고 무거움
- 1950 초: 논리회로를 작은 크기로 만든 직접회로 → 현대적인 컴퓨터 형상 만들어짐
- 1950 중후반
    - 오퍼레이터를 통해 cpu에 전달하는 과정에서 생기는 오버헤드 문제 해결을 위해 오퍼레이터에 여러개의 작업을 한번에 요청하는 “싱글스트림 배치시스템” 도입
    - 당시에 입출력 시 CPU 사용할 수 없었는데 입출력 담당하는 I/O 디바이스 컨트롤러를 만들어 입출력 중에도 CPU가 계산할 수 있도록 만듦. I/O 디바이스 컨트롤러는 입출력 작업이 끝나면 인터럽트를 보내 CPU가 작업을 처리할 수 있도록 함.
    - 입출력에도 CPU를 기다려야 하는 작업 있는데, 입력은 CPU의 연산을 기다려야하기 때문에 CPU 사용률이 떨어짐.(싱글 스트림 배치 시스템의 한계)
- 1960
    - 싱글 스트림 배치 시스템 해결: 프로그램을 하나씩 처리하는게 아니라 여러 프로그램을 번갈아가면서 실행해 사용자에게는 동시에 실행하는 것처럼 보임(시분할 시스템)
    - 당시 컴퓨터가 비싸서 여러 터미널을 통해 여러 사용자가 컴퓨터에 접근.
        - 이 때문에 개인적인 파일을 저장하기도 해서 ‘파일시스템 등장’
    - UNIX
        - 동시에 여러 개 실행시키는 ‘멀티프로그래밍’
        - 여러 사용자 지원하는 ‘다중 사용자’
        - ‘파일시스템’
    - 다른 프로그램의 메모리에 접근하거나 os의 메모리에 접근하게 되는 경우 문제가 생김
        - 여러 프로그램이 실행되니까 하드웨어 적으로 ‘베이스 레지스터’를 추가해서 시작 주소 저장하고 모든 프로그램은 0번 주소부터 시작한다고 가정
- 1970
    - 저렴해져서 개인이 소유하기 쉬워짐

### 운영체제의 구조

핵심: 커널

- 프로세스와 메모리, 저장장치를 관리하는 핵심적 기능
- 사용자는 인터페이스(GUI/CLI)를 통해서만 커널에 접근할 수 있음
    - GUI: 시각적 인터페이스
    - CLI: 텍스트를 이용해 커널과 상호작용
- 커널은 사용자로부터 자신을 보호하기 위한 ‘시스템 콜’ 이라는 인터페이스를 가지고 있음
    - 시스템 콜이 없으면? 중요한 데이터나 다른 데이터가 저장된 공간을 덮어쓸 수 있음
    - 시스템 콜을 사용하면? 운영체제가 알아서 하드디스크의 빈 공간에 저장하게 됨
- 하드웨어를 제작한 제조사에서 드라이버를 제공해서 이를 설치해서 사용해야 함.

### 컴퓨터 하드웨어와 구조
프로그램 내장 방식의 '폰 노이만 구조': 프로그램을 메모리(ram)에 내장
- 기존에 하드웨어와 프로그램 연결돼있었으나, cpu와 ram을 두고 이 사이를 버스로 연결하는 방식으로 변경
- 버스: 데이터를 전달하는 통로, 장치 간에 데이터를 전송하는 담당
- 메인보드: 다른 하드웨어를 연결하는 장치
  - 버스가 데이터 전송 담당
  - 폰 노이만 구조니까 cpu와 메모리 필수적
  - 하드디스크 연결 단자에는 하드디스크 꽂아줌
  - 그래픽 카드 연결 단자에는 그래픽 카드 꽂아줌
  - 출력 단자에 모니터 선 꽂으면 모니터 작동하게 됨
  - usb 단자에 마우스와 키보드 연결
  - 사운드 단자에 스피커 연결
- 중앙처리 장치, cpu(Central Processing Unit)
  - 산술 논리 연산 장치(ALU): 데이터 연산 장치
  - 제어 장치(Control Unit): 모든 장치들의 동작 지시 및 제어 장치
  - 레지스터(Register): 계산을 위해 임시로 보관하는 장치
- 메모리 종류
  - RAM: 랜덤으로 데이터 읽어도 저장된 위치와 상관없이 읽는 속도 같음, 메인 메모리, 전력 끊기면 날아감
  - ROM: 전력이 끊겨도 데이터 보관할 수 있지만, 한번 저장하면 변경x, 부팅과 관련된 정보를 주로 저장

### 컴퓨터 부팅 과정
- 부팅 시 ROM에 저장된 BIOS 실행
  - 주요 하드웨어에 문제가 있는지 확인, 문제 없으면 부트로드를 메모리에 가져와서 실행
  - 만약 운영체제가 여러개면 선택 가능, 운영체제를 메모리로 불러와 바탕화면 보임
  - 실행되는 모든 응용프로그램은 메모리에 올라와서 운영체제가 관리

### 인터럽트
cpu는 입출력작업 들어오면 입출력 관리자에게 입출력 명령 내림
- 폴링 방식: cpu가 입출력 관리자에게 주기적으로 확인해야 함
- 인터럽트: 폴링 방식 해결, 입출력 완료됐을 때 cpu에게 신호, cpu는 다른 작업하다가 신호를 받으면 인터럽트 서비스 루틴(ISR)을 실행시켜 작업 완료
  - 인터럽트 서비스 루틴(ISR): 특정 인터럽트가 들어오면 그 인터럽트 처리하는 함수(비동기적으로 동작해서 성능 이점)
  - 인터럽트 방식
    - 하드웨어 인터럽트: 입출력 인터럽트
    - 소프트웨어 인터럽트: 사용자 프로그램에서 발생한 인터럽트
      - ex) 0으로 나누는 명령어, 유효하지 않은 메모리 접근