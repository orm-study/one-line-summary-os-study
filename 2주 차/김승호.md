## CPU 스케줄링

### CPU 스케줄링 개요

- 컴퓨터의 자원은 크게 두가지로 구분 할 수 있다.
- 1. 필수장치 : CPU, 메모리
- 2. 주변장치 : 하드디스크, 키보드, 마우스

- 프로그램을 실행시키면 메모리에 프로세스가 생성되고 각 프로세스에는 1개 이상의 쓰레드가 있습니다.
- 프로세스들은 CPU를 차지하기 위해서 운영체제의 명령을 기다리고 있습니다.
- 운영체제는 모든 프로세스에게 CPU를 할당/해제 하는데 이를 'CPU 스케줄링' 이라고 한다.

- CPU 스케줄링에서 스케줄러(운영체제)가 고려해야 할 사항 두가지
- 1. 어떤 프로세스에게 CPU 리소스를 줘야하는가?
- 메모리에는 수 많은 프로세스들이 있는데 여기서 "어떤 프로세스에게 CPU 사용권을 줘야하는가" 한 프로세스에게만 계속 할당한다면 다른 프로세스 들이 불만이 많겠죠?
- 2. CPU를 할당받은 프로세스가 얼마의 시간동안 CPU를 사용해야 하는가?
- 오늘날은 시분할 처리방식으로 여러 프로세스에게 짧은 시간동안 돌아가면서 CPU를 할당합니다.
- 예를 들어 프로세스 A에게 1초동안 CPU 이용권을 주고 1초가 지나면 CPU를 뺏어서 프로세스 B에게 1초동안 CPU 이용권을 주는 방식입니다.
- 지금 말한 이 두가지 고려사항이 컴퓨터의 성능에 굉장히 큰 영향을 미칩니다.
- CPU를 할당받아 실행하는 작업을 CPU Burst라고 부르고 입출력 작업을 I/O Burst라고 부릅니다.

### 다중큐

- CPU 스케줄러는 "준비상태의 다중큐" 에 들어있는 프로세스들 중에 적당한 프로세스를 선택해서 실행상태로 전환시킵니다.
- 프로세스 정보를 담고있는 PCB는 준비상태의 다중큐에 들어가서 실행되기를 기다리고있고 CPU스케줄러에 의해 실행상태로 전환됩니다.
- 이때 CPU스케줄러는 준비상태의 다중큐를 참조해서 어떤 프로세스를 실행시킬지 결정합니다.

- I/O 작업도 비슷한데 실행중인 프로세스에서 I/O 작업이 발생하면 해당 I/O 작업의 종류별로 나뉜 큐에 들어가고 CPU 스케줄러는 이를 참조해 스케줄링 합니다.

### 스케줄링의 목표

- 1. 리소스 사용률
- 2. 오버헤드 최소화
- 3. 공평성
- 4. 처리량
- 5. 대기시간
- 6. 응답시간

### FIFO (First In First Out)

- 들어온 순서대로 CPU를 할당받아 작업을 처리합니다.
- 장점: 단순하고 직관적임.
- 단점: 한 프로세스가 끝나야 다음 프로세스가 처리되므로 비효율적일 수 있습니다.

### SJF (Shortest Job First)

- CPU Burst가 짧은 프로세스부터 먼저 실행하는 방식.
- 문제점: 각 프로세스의 Burst Time을 정확히 예측하기 어렵고, 긴 Burst Time을 가진 프로세스가 계속 지연되는 불공평한 상황이 발생할 수 있음.

### RR (Round Robin)

- 각 프로세스에게 일정 시간(타임 슬라이스)을 할당하여 처리하는 방식.
- 단점: 컨텍스트 스위칭이 자주 발생하면 오버헤드가 증가할 수 있음.
- 타임 슬라이스가 너무 크면 응답 속도가 느려지고, 너무 작으면 오버헤드가 커집니다.

### MLFQ (Multi Level Feedback Queue)

- 우선순위가 다른 여러 큐를 사용하여 CPU 사용률과 응답 속도를 동시에 고려한 스케줄링.
- CPU 사용이 많은 프로세스는 낮은 우선순위로 이동하며, 최종적으로 FIFO 방식처럼 동작합니다.
